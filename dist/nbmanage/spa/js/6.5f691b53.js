(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"20a1":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticStyle:{"min-width":"300px"}},[a("q-card-section",[a("div",{staticClass:"text-h6 text-weight-bold text-left text-uppercase"},[t._v(t._s(t.title))])]),0==t.isVerifycation?a("q-card-section",{staticClass:"row justify-between items-baseline q-mx-lg"},[a("div",{staticClass:"col-5 justify-between"},[a("div",{staticClass:"text-left text-body2 text-grey-7"},[t._v(t._s(t.$t("message.price"))+":")]),a("div",{staticClass:"text-left text-body2 text-grey-7 q-mt-lg"},[t._v(t._s(t.$t("message.transactionItem"))+"：")])]),a("div",{staticClass:"col-7 justify-between"},[a("div",{staticClass:"row"},[a("div",{staticClass:"text-left col-12 text-weight-medium text-indigo-7"},[t._v(t._s(t.payCmd.price/1e8)+" BSV")]),a("div",{staticClass:"text-left col-12 text-grey-8 text-body"},[t._v(t._s(t.usdPrice))])]),a("div",{staticClass:"text-left text-weight-medium text-indigo-7 q-mt-sm"},[t._v(t._s(t.payCmd.product))])])]):t._e(),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("q-tabs",{staticClass:"text-teal",attrs:{dense:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"tab_vbox",label:"VBox Pay"}}),a("q-tab",{attrs:{name:"tab_qr",label:"QR Pay"}})],1),"tab_qr"==t.tab?a("div",{staticClass:"q-my-md row"},[a("div",{staticClass:"col-6"},[a("qrcode-vue",{attrs:{value:t.qrValue,size:t.qrSize,level:"H"}})],1),a("div",{staticClass:"col-6"},[t._v("\n      "+t._s(t.$t("message.supported_wallet"))+" "),a("br"),a("a",{attrs:{href:"https://volt.id",target:"_blank"}},[t._v("Volt")])])]):t._e(),"tab_vbox"==t.tab?a("div",{staticClass:"q-my-md"},[a("div",{staticClass:"text-body2"},[t._v(t._s(t.vboxmsg))])]):t._e()],1),a("q-card-section",{staticClass:"items-center text-weight-regular",class:{"text-positive":t.success,"text-orange-9":!t.success}},[t._v("\n    "+t._s(t.message)+"\n    "),t.success?a("p",{staticStyle:{"word-wrap":"break-word","word-break":"break-all"}},[t._v(t._s(t.sendCmdRes.message))]):t._e()]),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("message.cancel")}}),a("q-btn",{attrs:{flat:"",label:t.textConfirm,loading:t.loading},on:{click:t.handlePay}})],1)],1)},i=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("967e")),n=a.n(r),o=(a("96cf"),a("fa84")),c=a.n(o),l=(a("386d"),a("c47a")),d=a.n(l),u=a("2f62"),m=a("b893"),p=a("d7b0");function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){d()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={name:"Pay",data:function(){return{isPwd:!0,payment:"privateKeyPay",success:!1,transactionSucceeded:this.$t("message.transactionSucceeded"),paymentFailed:this.$t("message.paymentFailed"),sendCmdRes:{},message:null,tab:"tab_vbox",loading:!1,cmdFee:{total:0},qrValue:"",vbRequest:{},payRequest:{},qrSize:100,payID:0,usdPrice:0,payCmd:{}}},computed:f({textConfirm:function(){var t=this.$t("message.confirm");return"tab_qr"==this.tab&&(t=this.$t("message.i_have_paid")),t},isVerifycation:function(){return"sign"==this.payCmd.cmd},title:function(){return console.log(this.payCmd),"sign"==this.payCmd.cmd?"Verification":this.$t("message.payment")},vboxmsg:function(){return"undefined"==typeof VBox?"VBox is not enabled. Please use Maxthon 6 browser.":"VBox is enabled. Please confirm."}},Object(u["b"])({transactionType:function(t){return t.search.transactionType}})),components:{QrcodeVue:p["a"]},created:function(){this.payCmd=this.$store.state.global.payCmd},getUSDPrice:function(){return c()(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",price+"USD");case 1:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){console.log("before destroy"),this.intervalID&&clearInterval(this.intervalID)},mounted:function(){var t=this;return c()(n.a.mark((function e(){var a,s;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getExchangeRate();case 2:a=e.sent,s=parseInt(a.rate)*t.payCmd.price/1e8,t.usdPrice="≈ "+s+" USD","sign"==t.payCmd.cmd?(t.vbRequest=m["a"].buildSignRequest(t.payCmd,!1),t.payRequest=m["a"].buildSignRequest(t.payCmd,!0,t.vbRequest.id)):(t.vbRequest=m["a"].buildPaymentRequest(t.payCmd,!1),t.payRequest=m["a"].buildPaymentRequest(t.payCmd,!0,t.vbRequest.id)),t.payID=t.vbRequest.id,console.log("this.payID="+t.payID),t.qrValue=JSON.stringify(t.payRequest),t.intervalID=setInterval(c()(n.a.mark((function e(){var a,s;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].checkReply(t.payID);case 2:a=e.sent,"404"!=a&&(t.intervalID&&clearInterval(t.intervalID),t.intervalID=0,s=JSON.parse(a),"none"==s.action?(t.$q.notify({timeout:1e3,position:"center",message:s.message}),t.closePayForm()):t.handleReply(a));case 4:case"end":return e.stop()}}),e)}))),2e3);case 10:case"end":return e.stop()}}),e)})))()},methods:{handlePay:function(){var t=this;if(this.success)this.closePayForm();else{this.loading=!0;"tab_vbox"==this.tab&&VBox&&VBox.Request(this.vbRequest,(function(e){t.handleReply(e)})),"tab_qr"==this.tab&&(console.log("tab_qr"),this.closePayForm())}},handleReply:function(t){console.log("in handleReply");var e=this,a=JSON.parse(t);console.log(a),console.log(e.payCmd),e.loading=!1,0==a.code?(e.success=!0,e.message=e.transactionSucceeded,e.success=!0):e.message=a.message,e.payCmd&&e.payCmd.callback&&(e.payCmd.callback(a,t),this.closePayForm())},closePayForm:function(){this.$emit("closePayForm")}}},g=b,y=a("2877"),v=a("eebe"),x=a.n(v),w=a("f09f"),C=a("a370"),A=a("eb85"),j=a("429bb"),q=a("7460"),D=a("4b7e"),P=a("9c40"),O=a("7f67"),T=Object(y["a"])(g,s,i,!1,null,null,null);e["a"]=T.exports;x()(T,"components",{QCard:w["a"],QCardSection:C["a"],QSeparator:A["a"],QTabs:j["a"],QTab:q["a"],QCardActions:D["a"],QBtn:P["a"]}),x()(T,"directives",{ClosePopup:O["a"]})},"58ec":function(t,e){t.exports="data:image/png;base64,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"},a92c:function(t,e,a){t.exports=a.p+"img/loading1.753753de.gif"},de80:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{attrs:{padding:""}},[s("div",{staticClass:"row justify-center"},[s("div",{staticClass:"text-center",staticStyle:{"max-width":"768px"}},[s("img",{attrs:{src:a("58ec")}}),s("p",{staticClass:"text-secondary text-h6 text-weight-bold"},[t._v(t._s(t.$t("message.aucDomain")))]),s("p",{staticClass:"text-secondary text-left text-body2"},[t._v("\n        "+t._s(t.$t("message.aucTitle"))+"\n      ")]),s("q-separator")],1)]),s("div",{staticClass:"row justify-center q-mt-lg"},[t.loading?s("img",{attrs:{src:a("a92c")}}):t._e(),s("div",{staticClass:"row justify-between",staticStyle:{"max-width":"768px"}},t._l(t.items,(function(e,a){return s("div",{key:a,staticClass:"col3"},[s("auction-item",{attrs:{item:e},on:{showpay:t.showPay}})],1)})),0)]),s("div",{staticClass:"row justify-center q-mt-lg"},[s("q-expansion-item",{staticClass:"q-mb-sm",staticStyle:{background:"rgba(4,99,111,0.15)",width:"768px"},scopedSlots:t._u([{key:"header",fn:function(){return[s("q-item-section",[s("div",{staticClass:"q-mx-sm text-secondary text-weight-bold",staticStyle:{display:"inline"}},[t._v("Finished      "+t._s(t.items_finished.length))])])]},proxy:!0}])},t._l(t.items_finished,(function(e,a){return s("div",{key:a,staticClass:"col-12 bg-white q-pa-sm q-mb-sm text-subtitle2"},[s("div",{staticClass:"row"},[s("div",{staticClass:"text-primary text-weight-bold q-pa-sm col-6"},[t._v(t._s(e.domain))]),s("div",{staticClass:"text-primary text-weight-bold q-pa-sm col-6"},[t._v(t._s(e.orders[e.orders.length-1].price/1e8)+" BSV")])])])})),0)],1),s("q-dialog",{attrs:{persistent:""},model:{value:t.showPayForm,callback:function(e){t.showPayForm=e},expression:"showPayForm"}},[s("pay-form",{on:{closePayForm:t.closePay}})],1)],1)},i=[],r=a("967e"),n=a.n(r),o=(a("96cf"),a("fa84")),c=a.n(o),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"no-shadow q-ma-sm",staticStyle:{"background-color":"rgba(4,99,111,0.05)"}},[a("q-card-section",[a("div",{staticClass:"text-h6 text-center q-px-md q-py-sm q-mb-lg",staticStyle:{background:"rgba(4,99,111,0.1)",border:"1px solid rgba(4,99,111,1)","border-radius":"5px"}},[t._v("\n      "+t._s(t.localItem.domain)+"\n      "),1!=t.localItem.finish?a("q-badge",{attrs:{color:"positive",floating:"",align:"top","text-color":"white"}},[a("span",[t._v(t._s(t.$t("message.bidding")))])]):t._e()],1),a("div",{staticClass:"text-primary q-my-sm"},[t._v(t._s(t.$t("message.price"))+":     "+t._s(t.price)+" BSV")]),a("div",{staticClass:"text-body q-my-sm"},[t._v(t._s(t.$t("message.leader"))+":    "+t._s(t.leader))]),a("div",{staticClass:"text-body q-my-sm"},[t._v(t._s(t.$t("message.number"))+":    "+t._s(t.order_number))]),a("div",{staticClass:"text-body q-my-sm"},[t._v(t._s(t.$t("message.endtime"))+":    "+t._s(t.end_time))])]),a("div",{staticClass:"row justify-center"},[t.item.finish?t._e():a("q-btn",{staticClass:"q-px-lg",attrs:{name:"bid",color:"primary",unelevated:"",label:t.$t("message.bid")},on:{click:function(e){return t.onBid(t.localItem)}}})],1),a("q-card-actions")],1)},d=[],u=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("c47a")),m=a.n(u),p=(a("84b4"),a("a284")),h=a.n(p),f=a("b893"),b=a("2f62");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){m()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var v={name:"auctionItem",props:["item"],data:function(){return{localItem:{}}},mounted:function(){this.localItem=this.item},methods:{PayResult:function(t){var e=this;return c()(n.a.mark((function a(){var s,i,r;return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(t),0==t.code){a.next=3;break}return a.abrupt("return");case 3:return s=JSON.parse(t.app_data),i={rawtx:t.rawtx,domain:e.localItem.domain,refundTo:t.refundTo,price:s.price},a.next=7,f["a"].place_order(i);case 7:r=a.sent,console.log("place_order result"),console.log(r),0==r.code&&(e.localItem=r.item);case 11:case"end":return a.stop()}}),a)})))()},onBid:function(t){var e=this;console.log("Bid:"+t.domain),this.$q.dialog({title:this.$t("message.price"),message:this.$t("message.inputPrice"),prompt:{model:this.price,type:"number"},cancel:!0,persistent:!0}).onOk((function(a){var s=1e8*a;console.log(s+"|"+e.price),a<=e.price+1e-6?e.$q.dialog({title:e.$t("message.sorry"),message:e.$t("message.reqHigher")}):(e.$store.commit("global/setPayCmd",{cmd:"pay",price:Math.trunc(s),product:e.$t("message.bidfor")+t.domain,detail:e.$t("message.bidfor")+t.domain,user:"any",action:"placeOrder",data:["1Ngh1SvpFjk1GyttichAyLvj9DLW36kssQ",t.domain],to:[{address:"1Ngh1SvpFjk1GyttichAyLvj9DLW36kssQ",value:Math.trunc(s)},{protocol:"refund"}],app_data:JSON.stringify({price:s,domain:t.domain}),callback:e.PayResult}),e.$emit("showpay"))}))}},computed:y({leader:function(){var t=void 0==this.localItem.orders?0:this.localItem.orders.length;if(0==t)return"";if(void 0==this.localItem.orders[t-1].pubKey)return"";var e=this.localItem.orders[t-1].pubKey;console.log(e);var a=h.a.PublicKey.fromString(e,"hex"),s=a.toAddress(),i=s;return i==this.currentDomain.address&&(i="You"),i},price:function(){if(void 0==this.localItem.orders)return this.localItem.base/1e8;var t=this.localItem.orders.length;if(0==t)return this.localItem.base/1e8;var e=this.localItem.orders[t-1];return e.price/1e8},order_number:function(){return void 0==this.localItem.orders?0:this.localItem.orders.length},end_time:function(){if(void 0==this.localItem.last_time)return"n/a";var t=this.localItem.duration,e=this.localItem.last_time+60*t*60*1e3,a=Math.round((e-Date.now())/1e3/60);if(a<0)return console.log("update finish"),this.localItem.finish||f["a"].update_finish(this.localItem),this.$t("message.finished");var s=a,i=s/60,r=Math.floor(i),n=60*(i-r),o=Math.round(n);return r+" hour(s) and "+o+" minute(s)."}},Object(b["b"])({currentDomain:function(t){return t.global.curDomain}}))},x=v,w=a("2877"),C=a("eebe"),A=a.n(C),j=a("f09f"),q=a("a370"),D=a("58a8"),P=a("9c40"),O=a("4b7e"),T=Object(w["a"])(x,l,d,!1,null,null,null),S=T.exports;A()(T,"components",{QCard:j["a"],QCardSection:q["a"],QBadge:D["a"],QBtn:P["a"],QCardActions:O["a"]});var I=a("20a1"),F={name:"PageAuction",components:{"auction-item":S,"pay-form":I["a"]},data:function(){return{showPayForm:!1,loading:!0,items:[],items_finished:[]}},methods:{showPay:function(){this.showPayForm=!0},closePay:function(){this.showPayForm=!1,this.refreshInfo()},refreshInfo:function(){var t=this;return c()(n.a.mark((function e(){var a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_auctionItems();case 2:a=e.sent,t.items_finished=[],t.items=[],a.forEach((function(e){e.finish?t.items_finished.push(e):t.items.push(e)}));case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return c()(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("auction.vue mounted"),t.loading=!0,e.next=4,t.refreshInfo();case 4:t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()}},k=F,R=a("9989"),H=a("eb85"),Z=a("3b73"),E=a("4074"),Q=a("24e8"),V=Object(w["a"])(k,s,i,!1,null,null,null);e["default"]=V.exports;A()(V,"components",{QPage:R["a"],QSeparator:H["a"],QExpansionItem:Z["a"],QItemSection:E["a"],QDialog:Q["a"]})}}]);