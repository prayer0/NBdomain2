(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"20a1":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticStyle:{"min-width":"300px"}},[s("q-card-section",[s("div",{staticClass:"text-h6 text-weight-bold text-left text-uppercase"},[e._v(e._s(e.title))])]),0==e.isVerifycation?s("q-card-section",{staticClass:"row justify-between items-baseline q-mx-lg"},[s("div",{staticClass:"col-5 justify-between"},[s("div",{staticClass:"text-left text-body2 text-grey-7"},[e._v(e._s(e.$t("message.price"))+":")]),s("div",{staticClass:"text-left text-body2 text-grey-7 q-mt-lg"},[e._v(e._s(e.$t("message.transactionItem"))+"：")])]),s("div",{staticClass:"col-7 justify-between"},[s("div",{staticClass:"row"},[s("div",{staticClass:"text-left col-12 text-weight-medium text-indigo-7"},[e._v(e._s(e.payCmd.price/1e8)+" BSV")]),s("div",{staticClass:"text-left col-12 text-grey-8 text-body"},[e._v(e._s(e.usdPrice))])]),s("div",{staticClass:"text-left text-weight-medium text-indigo-7 q-mt-sm"},[e._v(e._s(e.payCmd.product))])])]):e._e(),s("q-separator",{attrs:{inset:""}}),s("q-card-section",[s("q-tabs",{staticClass:"text-teal",attrs:{dense:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("q-tab",{attrs:{name:"tab_vbox",label:"VBox Pay"}}),s("q-tab",{attrs:{name:"tab_qr",label:"QR Pay"}})],1),"tab_qr"==e.tab?s("div",{staticClass:"q-my-md row"},[s("div",{staticClass:"col-6"},[s("qrcode-vue",{attrs:{value:e.qrValue,size:e.qrSize,level:"H"}})],1),s("div",{staticClass:"col-6"},[e._v("\n      "+e._s(e.$t("message.supported_wallet"))+" "),s("br"),s("a",{attrs:{href:"https://volt.id",target:"_blank"}},[e._v("Volt")])])]):e._e(),"tab_vbox"==e.tab?s("div",{staticClass:"q-my-md"},[s("div",{staticClass:"text-body2"},[e._v(e._s(e.vboxmsg))])]):e._e()],1),s("q-card-section",{staticClass:"items-center text-weight-regular",class:{"text-positive":e.success,"text-orange-9":!e.success}},[e._v("\n    "+e._s(e.message)+"\n    "),e.success?s("p",{staticStyle:{"word-wrap":"break-word","word-break":"break-all"}},[e._v(e._s(e.sendCmdRes.message))]):e._e()]),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.$t("message.cancel")}}),s("q-btn",{attrs:{flat:"",label:e.textConfirm,loading:e.loading},on:{click:e.handlePay}})],1)],1)},n=[],r=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("967e")),i=s.n(r),o=(s("96cf"),s("fa84")),c=s.n(o),l=(s("386d"),s("c47a")),d=s.n(l),u=s("2f62"),m=s("b893"),p=s("d7b0");function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){d()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={name:"Pay",data:function(){return{isPwd:!0,payment:"privateKeyPay",success:!1,transactionSucceeded:this.$t("message.transactionSucceeded"),paymentFailed:this.$t("message.paymentFailed"),sendCmdRes:{},message:null,tab:"tab_vbox",loading:!1,cmdFee:{total:0},qrValue:"",vbRequest:{},payRequest:{},qrSize:100,payID:0,usdPrice:0,payCmd:{}}},computed:f({textConfirm:function(){var e=this.$t("message.confirm");return"tab_qr"==this.tab&&(e=this.$t("message.i_have_paid")),e},isVerifycation:function(){return"sign"==this.payCmd.cmd},title:function(){return console.log(this.payCmd),"sign"==this.payCmd.cmd?"Verification":this.$t("message.payment")},vboxmsg:function(){return"undefined"==typeof VBox?"VBox is not enabled. Please use Maxthon 6 browser.":"VBox is enabled. Please confirm."}},Object(u["b"])({transactionType:function(e){return e.search.transactionType}})),components:{QrcodeVue:p["a"]},created:function(){this.payCmd=this.$store.state.global.payCmd},getUSDPrice:function(){return c()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",price+"USD");case 1:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){console.log("before destroy"),this.intervalID&&clearInterval(this.intervalID)},mounted:function(){var e=this;return c()(i.a.mark((function t(){var s,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].getExchangeRate();case 2:s=t.sent,a=parseInt(s.rate)*e.payCmd.price/1e8,e.usdPrice="≈ "+a+" USD","sign"==e.payCmd.cmd?(e.vbRequest=m["a"].buildSignRequest(e.payCmd,!1),e.payRequest=m["a"].buildSignRequest(e.payCmd,!0,e.vbRequest.id)):(e.vbRequest=m["a"].buildPaymentRequest(e.payCmd,!1),e.payRequest=m["a"].buildPaymentRequest(e.payCmd,!0,e.vbRequest.id)),e.payID=e.vbRequest.id,console.log("this.payID="+e.payID),e.qrValue=JSON.stringify(e.payRequest),e.intervalID=setInterval(c()(i.a.mark((function t(){var s,a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].checkReply(e.payID);case 2:s=t.sent,"404"!=s&&(e.intervalID&&clearInterval(e.intervalID),e.intervalID=0,a=JSON.parse(s),"none"==a.action?(e.$q.notify({timeout:1e3,position:"center",message:a.message}),e.closePayForm()):e.handleReply(s));case 4:case"end":return t.stop()}}),t)}))),2e3);case 10:case"end":return t.stop()}}),t)})))()},methods:{handlePay:function(){var e=this;if(this.success)this.closePayForm();else{this.loading=!0;"tab_vbox"==this.tab&&VBox&&VBox.Request(this.vbRequest,(function(t){e.handleReply(t)})),"tab_qr"==this.tab&&(console.log("tab_qr"),this.closePayForm())}},handleReply:function(e){console.log("in handleReply");var t=this,s=JSON.parse(e);console.log(s),console.log(t.payCmd),t.loading=!1,0==s.code?(t.success=!0,t.message=t.transactionSucceeded,t.success=!0):t.message=s.message,t.payCmd&&t.payCmd.callback&&(t.payCmd.callback(s,e),this.closePayForm())},closePayForm:function(){this.$emit("closePayForm")}}},g=h,b=s("2877"),v=s("eebe"),w=s.n(v),x=s("f09f"),q=s("a370"),_=s("eb85"),C=s("429bb"),P=s("7460"),$=s("4b7e"),k=s("9c40"),S=s("7f67"),R=Object(b["a"])(g,a,n,!1,null,null,null);t["a"]=R.exports;w()(R,"components",{QCard:x["a"],QCardSection:q["a"],QSeparator:_["a"],QTabs:C["a"],QTab:P["a"],QCardActions:$["a"],QBtn:k["a"]}),w()(R,"directives",{ClosePopup:S["a"]})},5485:function(e,t,s){"use strict";var a=s("f966"),n=s.n(a);n.a},"8b24":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"q-ma-lg"},[a("div",{staticClass:"row justify-left"},[a("div",{staticClass:"text-info col-xs-11 col-sm-10 col-md-8"},[a("p",[e._v(e._s(e.$t("message.searchDomain"))+"(.test)")])])]),a("div",{staticClass:"row justify-left"},[a("q-form",{staticClass:"col-xs-11 col-sm-10 col-md-7 justify-left",on:{submit:e.submitSearch}},[a("q-input",{attrs:{filled:"",placeholder:"domain name",clearable:"","bg-color":"white",rules:[function(e){return/([\s\S]*)\.(test)$/.test(e)||"Please type a domain name that ends with .test"}]},scopedSlots:e._u([{key:"after",fn:function(){return[a("q-btn",{staticClass:"search-btn",attrs:{unelevated:"",color:"primary",label:e.$t("message.search"),"no-caps":""},on:{click:e.submitSearch}})]},proxy:!0}]),model:{value:e.queryNid,callback:function(t){e.queryNid=t},expression:"queryNid"}})],1)],1),e.searched?a("div",{staticClass:"row justify-left no-wrap"},[a("div",{staticClass:"col-xs-11 col-sm-10 col-md-7"},[a("q-card",{staticClass:"no-shadow domain-search-result-card"},[a("q-card-section",{staticClass:"row justify-between items-baseline"},[a("p",{staticClass:"text-weight-regular"},[e._v(e._s(e.queryNid))]),a("q-badge",{attrs:{color:e.registered?"warning":"positive","text-color":"white"}},[a("span",[e._v(e._s(e.getBadge))])])],1)],1)],1)]):e._e(),a("div",{staticClass:"row justify-left no-wrap q-my-lg"},[a("div",{staticClass:"col-xs-11 col-sm-10 col-md-7"},[a("q-card",{staticClass:"no-shadow domain-search-result-card"},[a("q-card-section",{staticClass:"row justify-center items-baseline"},[a("q-badge",{attrs:{color:"positive","text-color":"white"}},[a("span",[e._v("\n                "+e._s(e.$t("message.register"))+"\n              ")])])],1),a("q-card-section",{staticClass:"row justify-around items-baseline"},[a("q-btn",{attrs:{color:"secondary",padding:"xs xl",label:e.$t("message.freeDomain"),size:"sm","no-caps":""},on:{click:function(t){return e.$router.push("free")}}}),a("q-btn",{attrs:{color:"secondary",padding:"xs xl",label:e.$t("message.auction"),size:"sm","no-caps":""},on:{click:function(t){return e.$router.push("auction")}}})],1)],1)],1)]),a("div",{staticClass:"row justify-left no-wrap q-my-lg"},[a("q-card",{staticClass:"no-shadow col-xs-11 col-sm-10 col-md-7"},[a("q-card-section",[a("div",{staticClass:"text-info q-mb-sm"},[a("q-icon",{attrs:{name:"flash_on"}}),e._v("\n            "+e._s(e.$t("message.news"))+":\n            "),a("q-separator"),e.loading1?a("img",{attrs:{src:s("a92c")}}):e._e(),e._l(e.news,(function(t,s){return a("div",{key:s,staticClass:"text-primary text-body q-my-sm q-px-sm"},[a("a",{staticClass:"text-primary",staticStyle:{"text-decoration":"none"},attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.title))])])}))],2)])],1)],1),a("div",{staticClass:"row justify-left no-wrap q-my-lg"},[a("q-card",{staticClass:"no-shadow col-xs-11 col-sm-10 col-md-7"},[a("q-card-section",[a("div",{staticClass:"text-info q-mb-sm"},[a("q-icon",{attrs:{name:"flash_on"}}),e._v("\n            "+e._s(e.$t("message.newdomain"))+":\n            "),a("q-separator")],1),e.loading2?a("img",{attrs:{src:s("a92c")}}):e._e(),e._l(e.new_domains,(function(t,s){return a("span",{key:s,staticClass:"text-primary text-body q-my-sm q-px-sm",staticStyle:{display:"inline-block"}},[e._v(e._s(t))])}))],2)],1)],1)]),a("q-dialog",{attrs:{persistent:""},model:{value:e.showPayForm,callback:function(t){e.showPayForm=t},expression:"showPayForm"}},[a("pay-form",{attrs:{action:e.action,privateKey:e.privateKey,txType:e.txType},on:{closePayForm:e.closePayForm}})],1)],1)},n=[],r=s("967e"),i=s.n(r),o=(s("96cf"),s("fa84")),c=s.n(o),l=s("20a1"),d=s("b893"),u={name:"Index",components:{"pay-form":l["a"]},data:function(){return{queryNid:null,freeDomains:[],searched:!1,registered:!1,payment:"privateKeyPay",privateKey:null,isPwd:!0,showPayForm:!1,showVerificationForm:!1,action:"",txType:"",transaction:null,cmd:null,success:!1,type:"-1",loading1:!0,loading2:!0,cmdFee:{total:0},new_domains:[],news:[],getCmdFeeRes:{}}},mounted:function(){var e=this;return c()(i.a.mark((function t(){var s;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=navigator.language,s="zh-cn"==s.toLowerCase()?"cn":null,e.loading1=!0,t.next=5,d["a"].get_news(s);case 5:return e.news=t.sent,e.loading1=!1,e.loading2=!0,t.next=10,d["a"].new_domains();case 10:e.new_domains=t.sent,e.loading2=!1;case 12:case"end":return t.stop()}}),t)})))()},computed:{getAction:function(){return this.registered||"100"==this.type?this.$t("message.view"):this.$t("message.register")},getBadge:function(){return this.registered?this.$t("message.registered"):"100"==this.type?this.$t("message.protected"):this.$t("message.unregistered")}},watch:{payment:function(e){"walletPay"===e&&(this.privateKey=null)},queryNid:function(e){e||(this.searched=!1)}},created:function(){return c()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{submitSearch:function(){var e=this;return c()(i.a.mark((function t(){var s,a,n,r;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e,a=e.queryNid,t.next=4,d["a"].get_domain(a);case 4:n=t.sent,s.searched=!0,r=n.code,s.registered=0===n.code,console.log(n),0===r?(s.type="-1",s.$store.commit("search/setSearchResult",n),s.$store.commit("search/setQueryNid",a)):(s.type=n.type,s.cmdFee.total=n.price);case 10:case"end":return t.stop()}}),t)})))()},onSearchResultAction:function(){var e=this.registered,t=this.queryNid;if(console.log(t),console.log(this.type),this.$store.commit("search/setQueryNid",t),e)this.$router.push({name:"detail"});else if(0==this.type&&this.registerDomain(t),"100"==this.type)return void window.open("https://medium.com/@NBdomain/your-nbdomain-is-permanent-b7b3ae76d587#6b74")},RegResult:function(e,t){var s=this;return c()(i.a.mark((function a(){var n;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(e),0==e.code){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,d["a"].register_domain({id:e.id,data:t});case 5:n=a.sent,console.log("register_domain result"),console.log(n),0==n.code&&s.getFreeDomains();case 9:case"end":return a.stop()}}),a)})))()},hideVerificationForm:function(){this.showVerificationForm=!1},showPay:function(){this.showPayForm=!0},closePayForm:function(){this.showPayForm=!1},getFreeDomains:function(){var e=this;return c()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].getFreeDomains();case 2:e.freeDomains=t.sent,console.log(e.freeDomains);case 4:case"end":return t.stop()}}),t)})))()}}},m=u,p=(s("5485"),s("2877")),y=s("eebe"),f=s.n(y),h=s("9989"),g=s("0378"),b=s("27f9"),v=s("9c40"),w=s("f09f"),x=s("a370"),q=s("58a8"),_=s("0016"),C=s("eb85"),P=s("24e8"),$=Object(p["a"])(m,a,n,!1,null,null,null);t["default"]=$.exports;f()($,"components",{QPage:h["a"],QForm:g["a"],QInput:b["a"],QBtn:v["a"],QCard:w["a"],QCardSection:x["a"],QBadge:q["a"],QIcon:_["a"],QSeparator:C["a"],QDialog:P["a"]})},a92c:function(e,t,s){e.exports=s.p+"img/loading1.753753de.gif"},f966:function(e,t,s){}}]);